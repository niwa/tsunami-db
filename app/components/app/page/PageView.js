define(["jquery","underscore","backbone","text!./page.html","text!./pageContent.html","text!templates/loading.html","text!templates/content_about.html","text!templates/content_usage.html","text!templates/content_contact.html","text!templates/content_basemap.html","text!templates/content_attributes.html","text!templates/not_found.html","text!templates/content_palaeotsunami.html","text!templates/content_sources.html","text!templates/content_travel.html"],function(e,t,a,l,o,s,n,r,g,h,i,m,c,p,d){return a.View.extend({events:{"click .close-page":"closePage","click a":"pageLink"},initialize:function(){this.render(),this.listenTo(this.model,"change:active",this.handleActive),this.listenTo(this.model,"change:pageId",this.handlePageChange),this.listenTo(this.model,"change:anchor",this.handlePageAnchorChange)},render:function(){return this.model.hasActivePage()&&this.loadPage(),this},loadPage:function(){var e=this.model.getActivePage();if(void 0!==e){if(this.$el.html(t.template(l)({t:this.model.getLabels(),classes:e.getClass()})),this.$(".page-outer").html(t.template(s)({t:this.model.getLabels()})),this.model.hasActivePage()){var a=this;switch(this.model.attributes.pageId){case"about":a.$(".page-outer").html(t.template(n)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0);break;case"attributes":a.$(".page-outer").html(t.template(i)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()?a.$el.scrollTop(0):this.handlePageAnchorChange();break;case"usage":a.$(".page-outer").html(t.template(r)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0);break;case"basemap":a.$(".page-outer").html(t.template(h)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0);break;case"contact":a.$(".page-outer").html(t.template(g)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0);break;case"palaeotsunami":a.$(".page-outer").html(t.template(c)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0);break;case"sources":a.$(".page-outer").html(t.template(p)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0);break;case"travel":a.$(".page-outer").html(t.template(d)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0);break;default:a.$(".page-outer").html(t.template(m)({})),a.$(".page-outer").removeClass("loading"),""===a.model.getPageAnchor()&&a.$el.scrollTop(0)}}}else this.$el.html("")},handlePageChange:function(){this.render()},handleActive:function(){this.model.isActive()?this.$el.show():this.$el.hide()},pageLink:function(t){void 0!==e(t.target).attr("href")&&e(t.target).attr("href").startsWith("#")&&(t.preventDefault(),this.$el.trigger("navLink",{route:"page",id:this.model.get("pageId"),anchor:e(t.target).attr("href").substring(1)}))},closePage:function(e){e.preventDefault(),this.$el.trigger("pageClose")},handlePageAnchorChange:function(){var e=this.model.getPageAnchor();if(this.model.hasActivePage()&&""!==e){var t=this,a=(this.model.getActivePage(),t.$("#"+t.model.getPageAnchor()));a.length>0&&t.$el.scrollTop(t.$el.scrollTop()+a.parent().offset().top-t.$el.offset().top-20)}}})});