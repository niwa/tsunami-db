define(["jquery","underscore","backbone","./ColumnModel"],function(e,t,n,u){var o=n.Collection.extend({model:u,initialize:function(e,t){this.options=t||{}},initializeModels:function(){t.each(this.models,function(e){if(e.get("queryColumn")||console.log(e.get("queryColumn")),"quantitative"===e.get("type")||"date"===e.get("type")){if("auto"===e.getValues()){var n=this.options.records.getValuesForColumn(e.get("queryColumn"));e.set("values",{range:{min:n[0],max:n[n.length-1]}})}else if(void 0!==e.getValues().range&&("auto"===e.getValues().range.min[0]||"auto"===e.getValues().range.max[0])){var n=this.options.records.getValuesForColumn(e.get("queryColumn"));"auto"===e.getValues().range.min[0]&&(e.getValues().range.min[0]=n[0]),"auto"===e.getValues().range.max[0]&&(e.getValues().range.max[0]=n[n.length-1])}}else if("categorical"===e.get("type")||"ordinal"===e.get("type")){if("auto"===e.getValues()){var n=this.options.records.getValuesForColumn(e.get("queryColumn"));e.set("values",{values:n,labels:t.clone(n),hints:[],colors:1===e.get("colorable")?t.map(n,function(){return"#969696"}):[]})}if(1===e.get("blanks")){var n=e.get("values");n.values.push("null"),n.labels.push("Unspecified"),void 0!==n.colors&&n.colors.push("#969696")}}},this)},byType:function(e){var t=this.filter(function(t){return t.get("type")===e});return new o(t)},byGroup:function(e){var t=this.filter(function(t){return t.get("group")===e});return new o(t)},byAttribute:function(t,n){n=void 0!==n?n:1;var u=this.filter(function(u){return e.isArray(n)?n.indexOf(u.get(t))>-1:u.get(t)===n});return new o(u)},byQueryColumn:function(e){return this.filter(function(t){return t.getQueryColumnByType("value")===e||t.getQueryColumnByType("min")===e||t.getQueryColumnByType("max")===e})[0]}});return o});