define(["jquery","underscore","backbone","./LayerModel"],function(e,n,t,i){var o=t.Collection.extend({model:i,initialize:function(e,n){this.options=n||{},this.on("add",function(e){e.set("baseurl",this.options.baseurl),e.set("mapConfig",this.options.mapConfig),e.initStyles()})},byIds:function(e){var n=this.filter(function(n){return e.indexOf(n.id)>-1});return new o(n)},bySource:function(e){return new o(this.where({source:e}))},setActive:function(e){e="object"==typeof e?e:[e],this.each(function(n){n.setActive(e.indexOf(n.id)>-1||n.isBasemap())})},byActive:function(e){return e=void 0===e||e,new o(n.sortBy(this.where({active:e}),"activeTime",this))},byActiveMap:function(){return new o(n.reject(this.byActive().models,function(e){return e.isBasemap()}))},byBasemap:function(e){return e=void 0===e||e,new o(this.where({basemap:e}))},byLoading:function(e){return e=void 0===e||e,new o(this.where({loading:e}))},isLoading:function(){return this.byLoading().length>0},getIds:function(){return n.map(this.models,function(e){return e.id})}});return o});