define(["jquery","underscore","backbone","./ProxyModel"],function(t,e,n,i){return n.Collection.extend({model:i,initialize:function(t,e){this.options=e||{}},toCSV:function(){var t="",n=e.without(Object.keys(this.models[0].attributes),"featureAttributeMap");return t+=n.join(","),t+="\n",e.each(this.models,function(i){e.each(n,function(e,n){n>0&&(t+=","),t+='"',t+=i.get(e)?i.get(e).toString().replace(/"/g,'""'):"",t+='"'}),t+="\n"}),t}})});